import{c as _,r as p,j as t,d as $,u as S,T}from"./index-Bm4Ux-n8.js";import{B as L}from"./Analytics-CHfyoLEq.js";import{C as I,a as E,b as A,c as D}from"./card-CWRAK8xa.js";import{E as P}from"./ErrorBoundary-lqg5wBrO.js";/**
 * @license lucide-react v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=_("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),j=p.forwardRef(({className:n,type:d,...r},a)=>t.jsx("input",{type:d,className:$("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:a,...r}));j.displayName="Input";const M=async n=>{if(n.length===0)return[];const d=`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=${n.join(",")}&order=market_cap_desc&per_page=10&page=1&sparkline=false`;try{const r=await fetch(d);if(!r.ok){let a=`Failed to fetch coin data (IDs: ${n.join(",")}), status: ${r.status}`;if(r.status===429)a=`API rate limit reached (429) when fetching coin data (IDs: ${n.join(",")}). Please try again later.`;else try{const i=await r.json();a+=` - Details: ${JSON.stringify(i)}`}catch{try{const m=await r.text();m?a+=` - Response: ${m.substring(0,100)}${m.length>100?"...":""}`:a+=` (${r.statusText||"Failed to parse error response body"})`}catch{a+=` (${r.statusText||"Failed to parse error response body and text fallback failed"})`}}throw console.error(`Error in fetchCoinData for ${d}: ${a}`,{status:r.status,statusText:r.statusText}),new Error(a)}return r.json()}catch(r){throw console.error(`Network or other error in fetchCoinData for ${d}:`,r),r instanceof Error?new Error(r.message||"A network error occurred while fetching coin data."):new Error(`An unknown error occurred while fetching coin data: ${String(r)}`)}},R=()=>{const[n,d]=p.useState("bitcoin"),[r,a]=p.useState("ethereum"),[i,m]=p.useState(["bitcoin","ethereum"]),{data:l,isLoading:x,error:h}=S({queryKey:["compareCoins",i],queryFn:()=>M(i),enabled:i.length===2&&i.every(e=>e.trim()!==""),staleTime:1e3*60*10,retry:(e,u)=>u.message.includes("429")||u.message.includes("404")?!1:e<2}),N=e=>{e.preventDefault(),n.trim()&&r.trim()&&m([n.trim().toLowerCase(),r.trim().toLowerCase()])},c=(e,u,f,k)=>{const C=k||(b=>b!=null?b.toLocaleString():"N/A");return t.jsxs("div",{className:"grid grid-cols-3 py-2 border-b border-border/50 text-sm",children:[t.jsx("div",{className:"col-span-1 text-muted-foreground",children:e}),t.jsx("div",{className:"col-span-1 text-center",children:u!=null?C(u):"N/A"}),t.jsx("div",{className:"col-span-1 text-center",children:f!=null?C(f):"N/A"})]})},w=e=>e==null?"N/A":t.jsx("span",{className:e>=0?"text-green-400":"text-red-400",children:`${e.toFixed(2)}%`}),s=l==null?void 0:l.find(e=>e.id===i[0]),o=l==null?void 0:l.find(e=>e.id===i[1]),g=h?h.message:"",y=g.includes("429")||g.toLowerCase().includes("rate limit");return t.jsxs(I,{className:"glass-card",children:[t.jsx(E,{children:t.jsxs(A,{className:"flex items-center",children:[t.jsx(F,{className:"w-6 h-6 mr-2 text-indigo-400"}),"Coin Comparison Tool"]})}),t.jsxs(D,{children:[t.jsxs("form",{onSubmit:N,className:"flex flex-col sm:flex-row gap-4 mb-6 items-end",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{htmlFor:"coin1",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Coin 1 ID (e.g., bitcoin)"}),t.jsx(j,{id:"coin1",value:n,onChange:e=>d(e.target.value),placeholder:"Enter coin ID"})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{htmlFor:"coin2",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Coin 2 ID (e.g., ethereum)"}),t.jsx(j,{id:"coin2",value:r,onChange:e=>a(e.target.value),placeholder:"Enter coin ID"})]}),t.jsx(L,{type:"submit",disabled:x||!n.trim()||!r.trim(),children:x?"Loading...":"Compare"})]}),h&&t.jsxs("div",{className:"bg-destructive/10 border border-destructive/30 text-destructive p-4 rounded-md text-center",children:[t.jsxs("div",{className:"flex items-center justify-center mb-2",children:[t.jsx(T,{className:"w-5 h-5 mr-2"}),t.jsx("span",{className:"font-semibold",children:"Error Fetching Data"})]}),t.jsx("p",{className:"text-sm",children:g}),y&&t.jsx("p",{className:"text-xs mt-1",children:"This may be due to API rate limits. Please wait a moment and try again."}),!y&&t.jsx("p",{className:"text-xs mt-1",children:"Please ensure the coin IDs are correct or try again later."})]}),!x&&!h&&l&&s&&o&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-3 py-2 font-semibold",children:[t.jsx("div",{className:"col-span-1",children:"Metric"}),t.jsxs("div",{className:"col-span-1 text-center flex items-center justify-center",children:[t.jsx("img",{src:s.image,alt:s.name,className:"w-6 h-6 mr-2"})," ",s.name," (",s.symbol.toUpperCase(),")"]}),t.jsxs("div",{className:"col-span-1 text-center flex items-center justify-center",children:[t.jsx("img",{src:o.image,alt:o.name,className:"w-6 h-6 mr-2"})," ",o.name," (",o.symbol.toUpperCase(),")"]})]}),c("Current Price",s.current_price,o.current_price,e=>`$${e==null?void 0:e.toLocaleString()}`),c("Market Cap",s.market_cap,o.market_cap,e=>`$${e==null?void 0:e.toLocaleString()}`),c("Market Cap Rank",s.market_cap_rank,o.market_cap_rank),c("24h Volume",s.total_volume,o.total_volume,e=>`$${e==null?void 0:e.toLocaleString()}`),c("24h Price Change",s.price_change_percentage_24h,o.price_change_percentage_24h,w),c("All-Time High (ATH)",s.ath,o.ath,e=>`$${e==null?void 0:e.toLocaleString()}`),c("All-Time Low (ATL)",s.atl,o.atl,e=>`$${e==null?void 0:e.toLocaleString()}`),c("Circulating Supply",s.circulating_supply,o.circulating_supply,e=>e==null?void 0:e.toLocaleString()),c("Total Supply",s.total_supply,o.total_supply,e=>e?e.toLocaleString():"âˆž")]}),!x&&!h&&l&&(!s||!o)&&i.length===2&&t.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:["Could not find data for one or both coins (",i.join(", "),"). Please check the IDs."]})]})]})},U=()=>t.jsxs("section",{className:"mb-10",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-6 pb-2 border-b border-border",children:"Community & Tools"}),t.jsx("div",{className:"space-y-8",children:t.jsx(P,{fallbackMessage:"Could not load Coin Comparison Tool.",children:t.jsx(R,{})})})]});export{U as default};
