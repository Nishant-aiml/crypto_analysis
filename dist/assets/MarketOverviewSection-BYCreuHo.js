import{c as u,j as e,T as o,i as g,u as _,R as p,P as $,k as P,C as q,l as j,L as K,m as z,n as H,J as h,o as O,B as F,X as D,Y as B,p as R,A as U}from"./index-Bm4Ux-n8.js";import{E as m}from"./ErrorBoundary-lqg5wBrO.js";import"./Analytics-CHfyoLEq.js";/**
 * @license lucide-react v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=u("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=u("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=u("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Y=({trendingCoins:l,isLoading:t,error:i})=>t?e.jsx("div",{className:"glass-card p-6 rounded-lg animate-pulse",children:"Loading trending coins..."}):i?e.jsxs("div",{className:"glass-card p-6 rounded-lg text-red-400 text-center",children:[e.jsx(o,{className:"w-6 h-6 mx-auto mb-2"}),"Error loading trending coins.",e.jsx("p",{className:"text-xs mt-1",children:i.message}),e.jsx("p",{className:"text-xs mt-1",children:"See toast notifications for more details or try refreshing."})]}):!l||l.length===0?e.jsx("div",{className:"glass-card p-6 rounded-lg text-muted-foreground text-center",children:"No trending coins data available. This could be temporary or due to an earlier data loading issue."}):e.jsxs("div",{className:"glass-card p-6 rounded-lg",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[e.jsx(X,{className:"w-5 h-5 mr-2 text-orange-400"}),"Trending Coins"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.slice(0,6).map((d,r)=>e.jsxs("div",{className:"p-4 bg-secondary/20 rounded-lg border border-orange-400/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-orange-400 font-bold",children:["#",r+1]}),e.jsx("img",{src:d.item.thumb,alt:d.item.name,className:"w-6 h-6"})]}),e.jsx(g,{className:"w-4 h-4 text-orange-400"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:d.item.symbol.toUpperCase()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:d.item.name}),e.jsxs("div",{className:"text-xs text-orange-400 mt-1",children:["Rank #",d.item.market_cap_rank]})]})]},d.item.id))})]}),A=["#F59E0B","#8B5CF6","#10B981","#EF4444","#06B6D4","#84CC16","#F97316","#8989DE"],Q=()=>{var N,f,y,b,k,C,w,M;const l={retry:(a,c)=>c.message.includes("429")?(a===0&&h.warning("API rate limit hit. Retrying..."),a<3):c.message.includes("404")?!1:a<2,retryDelay:(a,c)=>c.message.includes("429")?Math.min(1e3*2**a,3e4)+Math.random()*200:1e3*(a+1)},{data:t,isLoading:i}=_({queryKey:["globalData"],queryFn:H,staleTime:1e3*60*60,refetchInterval:1e3*60*90,...l,meta:{onError:a=>{h.error(`Market Dominance (Global) Error: ${a.message}`)}}}),{data:d,isLoading:r}=_({queryKey:["topCoinsForDominance"],queryFn:O,staleTime:1e3*60*60,refetchInterval:1e3*60*90,...l,meta:{onError:a=>{h.error(`Market Dominance (Top Coins) Error: ${a.message}`)}}});if(i||r)return e.jsx("div",{className:"glass-card p-6 rounded-lg animate-pulse",children:"Loading market dominance..."});const s=((f=(N=t==null?void 0:t.data)==null?void 0:N.market_cap_percentage)==null?void 0:f.btc)||0,n=((b=(y=t==null?void 0:t.data)==null?void 0:y.market_cap_percentage)==null?void 0:b.eth)||0,x=100-s-n,v=[{name:"Bitcoin",value:s,symbol:"BTC"},{name:"Ethereum",value:n,symbol:"ETH"},{name:"Others",value:x,symbol:"ALT"}],L=(d==null?void 0:d.slice(0,5).map((a,c)=>{var T,E;const V=((E=(T=t==null?void 0:t.data)==null?void 0:T.total_market_cap)==null?void 0:E.usd)||1,S=a.market_cap/V*100;return{symbol:a.symbol.toUpperCase(),name:a.name,dominance:S,change24h:a.price_change_percentage_24h,image:a.image}}))||[];return e.jsxs("div",{className:"glass-card p-6 rounded-lg",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[e.jsx(J,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Market Dominance Analysis"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Overall Dominance"}),e.jsx("div",{className:"h-[250px]",children:e.jsx(p,{width:"100%",height:"100%",children:e.jsxs($,{children:[e.jsx(P,{data:v,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:v.map((a,c)=>e.jsx(q,{fill:A[c%A.length]},`cell-${c}`))}),e.jsx(j,{formatter:a=>[`${a.toFixed(2)}%`,"Dominance"]}),e.jsx(K,{})]})})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Top Coins Breakdown"}),e.jsx("div",{className:"space-y-3",children:L.map((a,c)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:a.image,alt:a.name,className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.symbol}),e.jsx("div",{className:"text-sm text-muted-foreground",children:a.name})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:[a.dominance.toFixed(2),"%"]}),e.jsxs("div",{className:`flex items-center text-sm ${a.change24h>=0?"text-green-400":"text-red-400"}`,children:[a.change24h>=0?e.jsx(g,{className:"w-3 h-3 mr-1"}):e.jsx(z,{className:"w-3 h-3 mr-1"}),Math.abs(a.change24h).toFixed(1),"%"]})]})]},a.symbol))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[e.jsxs("div",{className:"p-3 bg-secondary/20 rounded-lg text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:[s.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"BTC Dominance"})]}),e.jsxs("div",{className:"p-3 bg-secondary/20 rounded-lg text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:[n.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"ETH Dominance"})]}),e.jsxs("div",{className:"p-3 bg-secondary/20 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:((C=(k=t==null?void 0:t.data)==null?void 0:k.active_cryptocurrencies)==null?void 0:C.toLocaleString())||"N/A"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Coins"})]}),e.jsxs("div",{className:"p-3 bg-secondary/20 rounded-lg text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["$",(((M=(w=t==null?void 0:t.data)==null?void 0:w.total_market_cap)==null?void 0:M.usd)/1e12).toFixed(2)||0,"T"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Market Cap"})]})]})]})},Z=({exchanges:l,isLoading:t,error:i})=>{if(t)return e.jsx("div",{className:"glass-card p-6 rounded-lg animate-pulse",children:"Loading exchange data..."});if(i)return e.jsxs("div",{className:"glass-card p-6 rounded-lg text-red-400",children:["Error loading exchange data: ",i.message]});if(!l||l.length===0)return e.jsx("div",{className:"glass-card p-6 rounded-lg text-muted-foreground",children:"No exchange data available."});const d=(l==null?void 0:l.slice(0,8).map(r=>({name:r.name.substring(0,10),volume:r.trade_volume_24h_btc,trustScore:r.trust_score})))||[];return e.jsxs("div",{className:"glass-card p-6 rounded-lg",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[e.jsx(I,{className:"w-5 h-5 mr-2 text-blue-400"}),"Exchange Volume Analysis"]}),e.jsx("div",{className:"h-[300px] mb-4",children:e.jsx(p,{width:"100%",height:"100%",children:e.jsxs(F,{data:d,children:[e.jsx(D,{dataKey:"name",stroke:"#E6E4DD",fontSize:12}),e.jsx(B,{stroke:"#E6E4DD",fontSize:12}),e.jsx(j,{contentStyle:{background:"#3A3935",border:"1px solid #605F5B",borderRadius:"8px"},formatter:r=>[`${r.toFixed(0)} BTC`,"Volume (24h)"]}),e.jsx(R,{dataKey:"volume",fill:"#60A5FA"})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l==null?void 0:l.slice(0,4).map(r=>e.jsx("div",{className:"p-3 bg-secondary/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:r.image,alt:r.name,className:"w-8 h-8"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:r.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Trust Score: ",r.trust_score,"/10"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium",children:[(r.trade_volume_24h_btc/1e3).toFixed(1),"K BTC"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"24h Volume"})]})]})},r.id))})]})},W=({marketData:l,isLoading:t})=>{if(t||!l)return e.jsx("div",{className:"glass-card p-6 rounded-lg animate-pulse",children:"Loading volume analysis..."});const i=l.map(s=>{const n=s.total_volume&&s.market_cap?s.total_volume/s.market_cap:0,x=s.price_change_percentage_24h||0;return{symbol:s.symbol.toUpperCase(),name:s.name,volume:s.total_volume,marketCap:s.market_cap,volumeToMcapRatio:n*100,priceChange24h:x,isAnomaly:n>.15,currentPrice:s.current_price,image:s.image}}).slice(0,15),d=[...i].sort((s,n)=>n.volume-s.volume).slice(0,10),r=i.filter(s=>s.priceChange24h<-5&&s.volumeToMcapRatio>10||s.priceChange24h>5&&s.volumeToMcapRatio>15);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-card p-6 rounded-lg",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[e.jsx(U,{className:"w-5 h-5 mr-2 text-blue-400"}),"Volume Analysis Dashboard"]}),e.jsx("div",{className:"h-[300px]",children:e.jsx(p,{width:"100%",height:"100%",children:e.jsxs(F,{data:d,children:[e.jsx(D,{dataKey:"symbol",stroke:"#E6E4DD",fontSize:12}),e.jsx(B,{stroke:"#E6E4DD",fontSize:12,tickFormatter:s=>`$${(s/1e9).toFixed(1)}B`}),e.jsx(j,{contentStyle:{background:"#3A3935",border:"1px solid #605F5B",borderRadius:"8px"},formatter:s=>[`$${(s/1e9).toFixed(2)}B`,"24h Volume"]}),e.jsx(R,{dataKey:"volume",fill:"#60A5FA"})]})})})]}),r.length>0&&e.jsxs("div",{className:"glass-card p-6 rounded-lg",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[e.jsx(o,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Volume vs Price Divergence Alerts"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.slice(0,6).map(s=>e.jsxs("div",{className:"p-4 bg-yellow-500/10 border border-yellow-400/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.symbol}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.name})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:["Price Change: ",e.jsxs("span",{className:s.priceChange24h>=0?"text-green-400":"text-red-400",children:[s.priceChange24h.toFixed(2),"%"]})]}),e.jsxs("div",{children:["Volume/MCap: ",e.jsxs("span",{className:"text-yellow-400",children:[s.volumeToMcapRatio.toFixed(1),"%"]})]})]}),e.jsx("div",{className:"text-xs text-yellow-400 mt-1",children:s.priceChange24h<-5?"High volume despite price drop":"Unusual volume spike with price rise"})]},s.symbol))})]}),e.jsxs("div",{className:"glass-card p-6 rounded-lg",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[e.jsx(g,{className:"w-5 h-5 mr-2 text-green-400"}),"Volume/Market Cap Efficiency"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.sort((s,n)=>n.volumeToMcapRatio-s.volumeToMcapRatio).slice(0,9).map(s=>e.jsxs("div",{className:`p-4 rounded-lg ${s.isAnomaly?"bg-orange-500/10 border border-orange-400/30":"bg-secondary/20"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-6 h-6"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.symbol}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["$",typeof s.currentPrice=="number"?s.currentPrice.toFixed(2):"N/A"]})]}),s.isAnomaly&&e.jsx(o,{className:"w-4 h-4 text-orange-400"})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Volume: $",(s.volume/1e9).toFixed(2),"B"]}),e.jsxs("div",{children:["Vol/MCap: ",e.jsxs("span",{className:s.volumeToMcapRatio>15?"text-orange-400":"text-muted-foreground",children:[s.volumeToMcapRatio.toFixed(1),"%"]})]}),e.jsxs("div",{children:["24h: ",e.jsxs("span",{className:s.priceChange24h>=0?"text-green-400":"text-red-400",children:[s.priceChange24h.toFixed(2),"%"]})]})]})]},s.symbol))}),e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{className:"w-4 h-4 text-orange-400"}),e.jsx("span",{children:"High volume/market cap ratio may indicate increased interest or manipulation"})]})})]})]})},ae=({trendingCoins:l,exchanges:t,marketData:i,isLoadingGlobal:d,errors:r,marketDataUnavailable:s})=>{var n;return e.jsxs("section",{className:"mb-10",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6 pb-2 border-b border-border",children:"Market Overview"}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(m,{fallbackMessage:"Could not load Trending Coins.",children:e.jsx(Y,{trendingCoins:l,isLoading:d&&!l&&!r.trendingCoinsError,error:r.trendingCoinsError})}),e.jsx(m,{fallbackMessage:"Could not load Market Dominance. (This component is read-only and fetches its own data)",children:e.jsx(Q,{})}),e.jsx(m,{fallbackMessage:"Could not load Exchange Analysis.",children:e.jsx(Z,{exchanges:t,isLoading:d&&!t&&!r.exchangesError,error:r.exchangesError})}),s&&!d?e.jsxs("div",{className:"glass-card p-6 rounded-lg text-yellow-500 text-center",children:["Volume Analysis data is currently unavailable. ",((n=r.marketDataError)==null?void 0:n.message)||"Market data could not be loaded."]}):e.jsx(m,{fallbackMessage:"Could not load Volume Analysis.",children:e.jsx(W,{marketData:i||[],isLoading:d&&!i&&!r.marketDataError})})]})]})};export{ae as default};
